function popupCenter(n,t,i,r){const u=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,f=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,e=(u-i)/2,o=(f-r)/2;return window.open(n,t,`
      scrollbars=yes,
      width=${i}, 
      height=${r}, 
      top=${o}, 
      left=${e}
      `)}function googleLogin(){var n=popupCenter("/Account/GoogleLogin","Google",600,600),t=setInterval(function(){n.closed&&(clearInterval(t),location.reload())},1e3)}function facebookLogin(){var n=popupCenter("/Account/FacebookLogin","Facebook",600,600),t=setInterval(function(){n.closed&&(clearInterval(t),location.reload())},1e3)}function deleteCarpPr(n){var t=$.cookie("ProductList");if(t=t&&JSON.parse(t),t&&t.length>0){var r=$(n).closest(".CProduct").data("id")+"",u=$(n).closest(".CProduct .atrVal").data("ids"),i=$.grep(t,function(n){return n.id!=r||$(n.atrs).not(u).length!=0});i.length!=t.length&&($.cookie("ProductList",JSON.stringify(i),{expires:365,path:"/"}),prCount=0,$.each(i,function(){prCount=prCount+this.count}),$("#ShoppingBagWrap small").text(prCount>99?"99+":prCount))}updateCart()}function updateCart(){$("#ModalLabel span").text("");$("#cartProductsWrap").empty().append('<div class="text-center mt-4 w-100"><div class="spinner-border" role="status"><span class="sr-only">Loading...<\/span><\/div><\/div>');$("#cartBodyTotal").text("");$.post("/Home/GetCartJson/",function(n){n&&n.resp?($("#cartProductsWrap").empty(),$("#ModalLabel span").text(n.count),$("#cartBodyTotal").text(n.total),$.each(n.resp,function(t,i){var r=$('<div class="col-5 d-flex align-items-center atrVal"><div class="mr-4"><button type="button" onclick="deleteCarpPr(this)" class="btn btn-primary btn-sm"><i class="las la-times"><\/i><\/button><\/div><a href="/Home/Product/'+i.id+'"><img class="img-fluid" src="/Home/GetProductImg/'+i.img+'" alt="..."><\/a><\/div>'),u=$('<div><div class="row align-items-center CProduct" data-id="'+i.id+'"><div class="col-7"><h6><a class="link-title" href="/Home/Product/'+i.id+'">'+i.t+' <\/a><\/h6><div class="product-meta"><span class="mr-2 text-primary">'+i.price+"<small> "+n.asd+'<\/small><\/span><span class="text-muted">x '+i.n+'<\/span><\/div><\/div><\/div><\/div><hr class="my-5">');r.data("ids",i.atrs);u.find(".CProduct").prepend(r);$("#cartProductsWrap").append(u)})):$("#cartProductsWrap").empty()})}function addToCart(n){var r,u,t,i;r=$(n).hasClass("AddToCart")?$(n).data("id"):$(n).closest(".product-card").data("id");u=["0"];t=$.cookie("ProductList");t=t&&JSON.parse(t);$.isArray(t)?(i=t.find(n=>n.id==r),i&&$(i.atrs).not(u).length==0&&$(u).not(i.atrs).length==0?(i.count=i.count+1,t=$.grep(t,function(n){return n.id!=r}),t.push(i),$.cookie("ProductList",JSON.stringify(t),{expires:365,path:"/"}),prCount=0,$.each(t,function(){prCount=prCount+this.count}),$("#ShoppingBagWrap small").removeClass("d-none").text(prCount>99?"99+":prCount)):(t.push({id:r,count:1,atrs:u}),$.cookie("ProductList",JSON.stringify(t),{expires:365,path:"/"}),prCount=0,$.each(t,function(){prCount=prCount+this.count}),$("#ShoppingBagWrap small").removeClass("d-none").text(prCount))):(t=[{id:r,count:1,atrs:u}],$.cookie("ProductList",JSON.stringify(t),{expires:365,path:"/"}),$("#ShoppingBagWrap small").removeClass("d-none").text(1));updateCart()}function HubBild(){function t(n){var i=$("#chatName").val()||"User",t=new Date,r=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes();return $("#messagingChat").append('<div class="userMessage"><div><b>'+i+"<\/b> <span>"+r+"<\/span><br/><span>"+n+"<\/span><\/div><\/div>")}function i(n,t){var i=new Date,r=(i.getHours()<10?"0":"")+i.getHours()+":"+(i.getMinutes()<10?"0":"")+i.getMinutes();$("#messagingChat").append('<div class="operatorMessage"><div><b>'+n+"<\/b> <span>"+r+"<\/span><br/><span>"+t+"<\/span><\/div><\/div>")}function r(){var i=$("#chatName").val()||"User";n.invoke("GetMessage",i,"Phone: "+($("#liveChatUserPhone").val()?$("#liveChatUserPhone").val():"")+", Email: "+($("#liveChatUserEmail").val()?$("#liveChatUserEmail").val():""));t($("#startChatWrap textarea").val());n.invoke("GetMessage",i,$("#startChatWrap textarea").val())}const n=(new signalR.HubConnectionBuilder).withUrl("/chatHub").build();n.on("newMessage",function(n,t){i(n,t);$("#messagingChat").animate({scrollTop:$("#messagingChat")[0].scrollHeight},1e3)});$("#sendNewMessage").click(function(){var i=$("#newMessage").val(),r;if(!i)return $("#newMessage").focus(),event.stopPropagation(),!1;r=$("#chatName").val()||"User";$("#newMessage").val("");t(i);$("#messagingChat").animate({scrollTop:$("#messagingChat")[0].scrollHeight},1e3);n.invoke("GetMessage",r,i)});$("#abortChat").click(function(){$("#chatName").val("");$("#liveChatUserPhone").val("");$("#liveChatUserEmail").val("");$("#startChatWrap textarea").val("");$("#newMessage").val("");$("#messagingChat").empty();$("#messagingChatWrap").addClass("d-none");$("#startChatWrap").removeClass("d-none");n.stop()});n.start().then(r)}$(document).ready(function(){var i=$.cookie("FavoritIds")&&JSON.parse($.cookie("FavoritIds")),n,t;i&&i.length&&$("#favoritesWrap small").removeClass("d-none").text(i.length>99?"99+":i.length);n=$.cookie("ProductList")&&JSON.parse($.cookie("ProductList"));$.isArray(n)&&(t=0,$.each(n,function(){t=t+this.count}),n&&n.length&&$("#ShoppingBagWrap small").removeClass("d-none").text(t>99?"99+":t));$("#SubscribeButton").click(function(){$("#SubscribeNewEmail").val()?$.post("/Home/Subscribe?email="+$("#SubscribeNewEmail").val(),function(n){n&&n.res?$("#SubscribeNewEmail").addClass("bg-success").removeClass("bg-danger"):$("#SubscribeNewEmail").removeClass("bg-success").addClass("bg-danger")}):$("#SubscribeNewEmail").removeClass("bg-success").addClass("bg-danger")});$(".HeartSection").ready(function(){var n=$.cookie("FavoritIds")&&JSON.parse($.cookie("FavoritIds")),t=$("#productList .ProductWrapper");$.isArray(n)&&t.length>0&&$.each(n,function(n,i){$.each(t,function(n,t){i.id===$(t).data("id")&&$(t).find(".Heart").addClass("HeartSelected")})})});$(".HeartSection").click(function(n){var i,t;($(n.target).hasClass("Heart")||$(n.target).is(".lar, .la-heart"))&&(i=$(n.target),$(i).is(".lar, .la-heart")&&(i=$(i).parent()),$(i).hasClass("HeartSelected")?($(i).removeClass("HeartSelected"),t=$.cookie("FavoritIds"),t=t&&JSON.parse(t),$.isArray(t)&&(t=$.grep(t,function(n){return n.id!=$(i).parent().data("id")}),$.cookie("FavoritIds",JSON.stringify(t),{expires:365,path:"/"}),t.length?t.length>99?$("#favoritesWrap small").text("99+"):$("#favoritesWrap small").text(t.length):$("#favoritesWrap small").addClass("d-none"))):($(i).addClass("HeartSelected"),t=$.cookie("FavoritIds"),t?(t=JSON.parse(t),$.isArray(t)&&(t.push({id:$(i).parent().data("id"),atrId:$(i).parent().data("atrid")}),$.cookie("FavoritIds",JSON.stringify(t),{expires:365,path:"/"}),t.length>99?$("#favoritesWrap small").text("99+"):$("#favoritesWrap small").text(t.length),t.length==1&&$("#favoritesWrap small").removeClass("d-none"))):(t=[{id:$(i).parent().data("id"),atrId:$(i).parent().data("atrid")}],$.cookie("FavoritIds",JSON.stringify(t),{expires:365,path:"/"}),$("#favoritesWrap small").removeClass("d-none").text(1))))});$(".QVLissener").click(function(n){var t,i;($(n.target).hasClass("qv")||$(n.target).is(".las, .la-eye"))&&(t=$(n.target),$(t).is(".las, .la-eye")&&(t=$(t).closest(".qv")),i=t.data("id"),$.post("/Home/QuickView/"+i,function(n){if(n&&n.res){var t=n.res;$("#quick-view img").attr("src",t.img_src);$("#quick-view .BuyNow").attr("href",t.buy_src);$("#quick-view .GetPr").attr("href",t.pr_src);$("#quick-view .AddToCart").data("id",t.id);$("#quick-view .prTitle").html(t.title);$("#quick-view .prDes").html(t.desc);$("#quick-view .prBrand").text(t.brand);$("#quick-view .star-rating").empty().append('<i class="las la-star"><\/i>'.repeat(t.rating)+'<i class="las la-star font-weight-light"><\/i>'.repeat(5-t.rating));$("#quick-view .product-price").empty().append((t.sale&&t.sale!="0"?'<del class="text-muted">'+t.price+"<\/del><b> "+t.sale+"<\/b>":"<b>"+t.price+"<\/b>")+"<small>"+t.amd+"<\/small>")}}))});updateCart();$("#liveChatStart").click(function(){if(!$("#startChatWrap textarea").val())return $("#startChatWrap textarea").addClass("border-danger").focus(),event.stopPropagation(),!1;$("#startChatWrap").addClass("d-none");$("#messagingChatWrap").removeClass("d-none");$("#startChatWrap textarea").removeClass("border-danger");HubBild()})});